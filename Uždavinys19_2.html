<!DOCTYPE html>
<html>

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css" integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm"
        crossorigin="anonymous">
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/js/bootstrap.min.js" integrity="sha384-JZR6Spejh4U02d8jOt6vLEHfe/JQGiRRSQQxSfFWpi1MquVdAyjUar5+76PVCmYl"
        crossorigin="anonymous"></script>
    <script src="https://code.jquery.com/jquery-3.2.1.slim.min.js" integrity="sha384-KJ3o2DKtIkvYIK3UENzmM7KCkRr/rE9/Qpg6aAZGJwFDMVNA/GpGFF93hXpG5KkN"
        crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.12.9/umd/popper.min.js" integrity="sha384-ApNbgh9B+Y1QKtv3Rn7W3mgPxhU9K/ScQsAP7hUibX39j7fakFPskvXusvfa0b4Q"
        crossorigin="anonymous"></script>
        <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script> 
    <title>Uždavinys19_2</title>
    <style>
        h2, h4
        tr,
        td {
            text-align: center;
        }
       
         #saugoti,
        #issaugoti {
            width: 9em;
            margin: 0.1em;
        }
        .virs { background-color:lightgray; }
        /*.hide {
            display: none;
        } */
    </style>
</head>

<body>
    <h2>Įveskite duomenis</h2>
 

    <table class="table table-bordered" id="table">
          
        <thead>
            <tr>
                <td scope="col" colspan="6"><button type="button" id="saugoti" class="btn btn-secondary" data-toggle="modal" data-target="#modalData">Naujas</button></td>
            </tr>
            <tr style="background-color: black; color: white;">
                <th scope="col">
                    <div onclick="sort('data')">Data</div>
                </th>
                <th scope="col">
                    <div onclick="sort('numeris')">Valstybinis Nr.</div>
                </th>
                <th scope="col">
                    <div onclick="sort('atstumas')">Atstumas (m)</div>
                </th>
                <th scope="col">
                    <div onclick="sort('laikas')">Laikas (s)</div>
                </th>
                <th scope="col">Greitis (km/h)</th>
                <th scope="col" colspan="2">Veiksmai</th>
            </tr>
        </thead>

        <tbody id="a">
        </tbody>
    </table>

<!-- bootstrap modal-->
<div id="modalData" class="modal fade" role="dialog">
        <div class="modal-dialog">
          <div class="modal-content">
            <div class="modal-header virs">
              <h4 class="modal-title">Užpildykite laukus</h4>
              <button type="button" class="close" data-dismiss="modal">&times;</button>
            </div>
            <div class="modal-body text-center">
                 
                    <input type="text" id="data" placeholder="Data"><br>
                  
                    <input type="text" id="numeris" placeholder="Valstybinis Nr."><br>
                   
                    <input type="number" id="atstumas" placeholder="Atstumas"><br>
                 
                    <input type="number" id="laikas" placeholder="Laikas"><br>
            </div>
            <div class="modal-footer virs">

                <button id="save" type="button" class="btn btn-outline-dark" data-dismiss="modal">Saugoti</button>
                <button type="button" class="btn btn-outline-dark" data-dismiss="modal">Atšaukti</button>
            </div>
          </div>
        </div>
    </div>
    <div class="modal fade" role="dialog" id="modalTrinti">
            <div class="modal-dialog">
              <div class="modal-content">
                <div class="modal-header">
                  <button type="button" class="close" data-dismiss="modal">&times;</button>
                </div>
                <div class="modal-body text-center">
                        <p>Ar tikrai norite ištrinti?</p>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-outline-dark" data-dismiss="modal" id="istrinti" >Taip</button>
                    <button type="button" class="btn btn-outline-dark" data-dismiss="modal">Ne</button>
                </div>
              </div>
            </div>
         </div>

    <div class="modal fade" role="dialog"  id="koreguotiData" >
        <div class="modal-dialog">
          <div class="modal-content">
            <div class="modal-header">
              <h4 class="modal-title">Keisti duomenis</h4>
              <button type="button" class="close" data-dismiss="modal">&times;</button>
            </div>
            <div class="modal-body text-center">
                  
                    <input type="text" id="newD" placeholder=""><br>
                   
                    <input type="text" id="newN" placeholder=""><br>
                    
                    <input type="number" id="newA" placeholder=""><br>
                   
                    <input type="number" id="newL" placeholder=""><br>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-outline-dark" data-dismiss="modal" id="pakeisti" >Saugoti</button>
                <button type="button" class="btn btn-outline-dark" data-dismiss="modal">Atšaukti</button>
            </div>
          </div>
        </div>
    </div>



    <script>

        var auto = [
            // { 'data': '2018-04-01', 'numeris': 'ABC001', 'atstumas': 5000, 'laikas': 110 },
            // { 'data': '2018-02-02', 'numeris': 'ABC002', 'atstumas': 5000, 'laikas': 100 },
            // { 'data': '2018-01-03', 'numeris': 'ABC003', 'atstumas': 5000, 'laikas': 105 },
            // { 'data': '2018-01-04', 'numeris': 'ABC004', 'atstumas': 5000, 'laikas': 111 }
        ];

        function getVar(a) {
            return document.getElementById(a).value;
        }
        function salinti(a) {
            document.getElementById(a).value = "";
        }
        function automobiliai(dt, nr, at, lk) {
            this.data = dt;
            this.numeris = nr;
            this.atstumas = at;
            this.laikas = lk;
            this.greitis = this.atstumas / this.laikas * 3.6;}
            var auto = [];
            $('#saugoti').click(function() {
                var data = getVar("data");
            var numeris = getVar("numeris");
            var atstumas = parseInt(getVar("atstumas"));
            var laikas = parseInt(getVar("laikas"));

            var kitiAutomobiliai = new automobiliai(dt, nr, at, lk);
            objektas.push(kitiAutomobiliai);
            printLentele();
            salinti('data');
            salinti('numeris');
            salinti('atstumas');
            salinti('laikas');
        });

        // var sortOrder;
        // function sort(laukas) {
        //     sortOrder = (a, b) => {
        //         return a[laukas] < b[laukas] ? -1 : a[laukas] > b[laukas] ? 1 : 0;
        //     };
        //     lentele();
        // };
        // lentele();

        function printLentele() {
            // $('#a').html("");
            // var lentele = '';
            // sortOrder = sortOrder || sort('data');
            // auto.sort(sortOrder);
            auto.forEach((a, i) => {
                $('#duomLentele').append('<tr><td>' + d.data + '</td><td>' + d.numeris + '</td><td>' + d.atstumas + '</td><td>' + d.laikas + '</td><td>' + d.greitis + '</td>'
                + "<td><button class='btn btn-warning mr-3' onclick = 'trinti(" + i + ")' data-toggle='modal' data-target='#modalTrinti'>Naikinti</button>"
                + "<button class='btn btn-secondary' onclick = 'taisyti(" + i + ")' data-toggle='modal' data-target='#koreguotiData'>Taisyti</button></td>"
                + '</tr>');
                });
           
        }




        var deleteEilute;
        function trinti(index) {
            deleteEilute = index;
        }

        $ ('#trinti').click(function() {
            auto.splice(deleteEilute, 1);
            printLentele();
        });
        var editing;
        function taisyti(index) {
            editing = index;
        }
        $ ('#pakeisti').click(function() {
            var newD = getVar("data");
            var newN = getVar("numeris");
            var newA = getVar("atstumas");
            var newL = getVar("laikas");


            if (newD != '') auto[editing].data = newD;
            if (newN != '') auto[editing].numeris = newN;
            if (newA != '') auto[editing].atstumas = newA;
            if (newL != '') auto[editing].laikas = newL;

            printLentele();
            salinti('data');
            salinti('numeris');
            salinti('atstumas');
            salinti('laikas');
            
        });
       

    </script>

</body>

</html>