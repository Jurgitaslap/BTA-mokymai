<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css" integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm"
        crossorigin="anonymous">
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/js/bootstrap.min.js" integrity="sha384-JZR6Spejh4U02d8jOt6vLEHfe/JQGiRRSQQxSfFWpi1MquVdAyjUar5+76PVCmYl"
        crossorigin="anonymous"></script>
    <script src="https://code.jquery.com/jquery-3.2.1.slim.min.js" integrity="sha384-KJ3o2DKtIkvYIK3UENzmM7KCkRr/rE9/Qpg6aAZGJwFDMVNA/GpGFF93hXpG5KkN"
        crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.12.9/umd/popper.min.js" integrity="sha384-ApNbgh9B+Y1QKtv3Rn7W3mgPxhU9K/ScQsAP7hUibX39j7fakFPskvXusvfa0b4Q"
        crossorigin="anonymous"></script>
    <title>Uždavinys16_1</title>
    <style>
        h2,
        tr, td {
            text-align: center;
        }
    </style>
</head>
<body>
    <h2>Užpildykite laukus</h2>

    <table class="table table-bordered" id="table">
        <thead>
            <tr style="background-color: black; color: white;" >
                <th scope="col"><div onclick="sort('data')">Data</div></th>
                <th scope="col"><div onclick="sort('numeris')">Valstybinis Nr.</div></th>
                <th scope="col"><div onclick="sort('atstumas')">Atstumas (m)</div></th>
                <th scope="col"><div onclick="sort('laikas')">Laikas (s)</div></th>
                <th scope="col">Greitis (km/h)</th>
                <th scope="col" colspan="2">Veiksmai</th>
            </tr>
            <tr>
                <td scope="col"><input type="text" name="data" id="data" placeholder=""></td>
                <td scope="col"><input type="text" name="numeris" id="numeris" placeholder=""></td>
                <td scope="col"><input type="number" name="atstumas" id="atstumas" placeholder=""></td>
                <td scope="col"><input type="number" name="laikas" id="laikas" placeholder=""></td>
                <td scope="col" colspan="3"><button type="submit" id="saugoti" class="btn btn-secondary" onclick="add()">Saugoti</button></td>
                <td scope="col" ></td>
            </tr>
        </thead>
        <tbody id="a">
        </tbody>
    </table>

    <script>

  var auto = [
            {'data': '2018-04-01', 'numeris': 'ABC001', 'atstumas': 5000, 'laikas': 110},
            {'data': '2018-02-02', 'numeris': 'ABC002', 'atstumas': 5000, 'laikas': 100},
            {'data': '2018-01-03', 'numeris': 'ABC003', 'atstumas': 5000, 'laikas': 105},
            {'data': '2018-01-04', 'numeris': 'ABC004', 'atstumas': 5000, 'laikas': 111}
        ];

function getVar(a) {
    return document.getElementById(a).value;
}
function salinti(a) {
    document.getElementById(a).value = "";
}
        function add() {
           auto.push({'data': document.querySelector('#data').value, 'numeris': document.querySelector('#numeris').value, 'atstumas': document.querySelector('#atstumas').value, 'laikas': document.querySelector('#laikas').value});
            lentele();
             salinti('data');
             salinti('numeris');
             salinti('atstumas');
             salinti('laikas');
         };

        var sortOrder;
        function sort(laukas) {
            sortOrder = (a, b) => {
                return a[laukas] < b[laukas] ? -1 : a[laukas] > b[laukas] ? 1 : 0;
            }; 
            lentele();
        };
        lentele();

        function lentele() {
            var lentele = '';
            sortOrder = sortOrder || sort('data');
          auto.sort(sortOrder); 
           auto.forEach((a, i) => { 
               lentele +=   
                    '<tr>' +
                        '<td>' + a.data + '</td>' +
                        '<td>' + a.numeris + '</td>' +
                        '<td>' + a.atstumas + '</td>' +
                        '<td>' + a.laikas + '</td>' +
                        '<td>' + (a.atstumas / a.laikas * 3.6).toFixed(0) + '</td>' +
                        '<td><button onclick="trinti(' + i + ')">Trinti</button></td>' +
                        '<td><button onclick="taisyti(' + i + ')">Taisyti</button></td>'
                    '</tr>';
            });
            document.getElementById('a').innerHTML = lentele; 
        };
        
          function trinti(index) {
          auto.splice(index, 1); 
            lentele();
        };     
            //pasizymim eilute
            var table = document.getElementById("table"), rIndex;
            for (var i=1; i< table.rows.length; i++) {
                table.rows[i].onclick = function() {
                    rIndex = this.rowIndex;
                    console.log(rIndex);
                    document.getElementById("data").value = this.cells[0].innerHTML;
                    document.getElementById("numeris").value = this.cells[1].innerHTML;
                    document.getElementById("atstumas").value = this.cells[2].innerHTML;
                    document.getElementById("laikas").value = this.cells[3].innerHTML;
                };
            };
            //koreguoti reiksmes
            function taisyti() {
               table.rows[rIndex].cells[0].innerHTML = document.getquerySelector("data").value;
               table.rows[rIndex].cells[1].innerHTML = document.getquerySelector("numeris").value;
               table.rows[rIndex].cells[2].innerHTML = document.getquerySelector("atstumas").value;
               table.rows[rIndex].cells[3].innerHTML = document.getquerySelector("laikas").value;
            };

     

    </script>

</body>

</html>
